(function($){"use strict";$(function(){App.init()});window.initUI=function(){initTooltipPopover();initFormValidate();initAjaxForm();initSortableTable();initCheckableTable();initSelect();initPopup();initLabelPicker();initFancybox();initCollapse();initBytes();initDaterange();initDatepicker();$(".dropdown-toggle").dropdown();$(".focus").focus()};$(function(){initUI();$.extend($.gritter.options,{position:"bottom-left",fade_in_speed:"fast",fade_out_speed:1e3,time:2e3});$(window).on("keydown",function(e){var code=e.keyCode||e.which;if(code==120)$(".form-receiver-container").toggle()});var _ajaxTime=null;$(document).ajaxStart(function(){_ajaxTime=(new Date).getTime()});$(document).ajaxSuccess(function(e,xhr,option,data){var passData=$.type(option.data)=="string"?queryToObject(option.data):option.data;var ajaxTotalTime=(new Date).getTime()-_ajaxTime;if(!data.error&&_.has(passData,"successCallback")&&$.type(window[passData.successCallback])=="function"){window[passData.successCallback](e,xhr,option,data)}else if(data.error&&_.has(passData,"errorCallback")&&$.type(window[passData.errorCallback])=="function"){window[passData.errorCallback](e,xhr,option,data)}else if(!data.error&&ajaxTotalTime>3e3){}else if(data.error){var errorText="";if(_.has(data,"errorMsg"))errorText=data.errorMsg;if(_.has(data,"msg"))errorText=data.msg;if(_.has(data,"errorType"))errorText+=" ["+data.errorType+"]";$.gritter.add({title:"ERROR",text:errorText,class_name:"gritter-danger",sticky:false,time:5e3})}});$(document).ajaxError(function(e,xhr,option,error){var passData=queryToObject(option.data);if(passData.errorCallback&&$.type(window[passData.errorCallback])=="function"){window[passData.errorCallback](e,xhr,option,passData)}else{$.gritter.add({title:"ERROR",class_name:"gritter-danger",text:"요청 수행 중 오류가 발생했습니다.",sticky:true})}});var $helper=$(".content .help");if($helper.length>0){var $helperContainer=$('<div class="row page-help-container hide"><div class="col-lg-12"><div class="alert alert-light page-help fade show border mb-2 "></div></div></div>');$helper.before($helperContainer);$helperContainer.find(".page-help").append($helper)}var $pageHelps=$(".page-help");if($pageHelps.length>0){var $pageClose=$('<button type="button" class="close">&times;</button>');$pageClose.prependTo($pageHelps);if(Cookies.get("page-help")!="close"){$(".page-help-container").removeClass("hide")}else{$(".page-help-toggler").removeClass("hide")}$(".page-help-toggler").on("click",function(){$(".page-help-container").removeClass("hide");$(".page-help-toggler").addClass("hide");Cookies.remove("page-help")});$pageClose.on("click",function(){$(".page-help-container").addClass("hide");$(".page-help-toggler").removeClass("hide");Cookies.set("page-help","close",{expires:365})})}});window.admin=function(url){return _CONF.prefix+url+_CONF.suffix};$("#logout").on("click",function(){swal({title:"로그아웃 하시겠습니까 ?",type:"info",showCancelButton:true,confirmButtonClass:"btn-danger",confirmButtonText:"로그아웃",cancelButtonText:"아니오",closeOnConfirm:false,closeOnCancel:true},function(isConfirm){if(isConfirm){doForm({url:admin("/login"),act:"logout"})}})});window.addFooterInfo=function(info){var oldinfo=$("#footer-info").text();if(info){$("#footer-info-container").removeClass("d-none");if(oldinfo){$("#footer-info").text(oldinfo+"/"+info)}else{$("#footer-info").text(info)}}};var _selectUserModal='<div class="modal" tabindex="-1">';_selectUserModal+='<div class="modal-dialog modal-lg modal-dialog-centered">';_selectUserModal+='<div class="modal-content">';_selectUserModal+='<div class="modal-body p-0" style="background-color:#939ba1;">';_selectUserModal+='<iframe id="selectUserFrame" name="selectUserFrame" src="" class="select-user-frame w-100 border-0" height="730"></iframe>';_selectUserModal+="</div>";_selectUserModal+="</div>";_selectUserModal+="</div>";_selectUserModal+="</div>";var $selectUserModal=$(_selectUserModal),_selectUserUrl=_CONF.prefix+"/selectuser?_nofooter=true",initSelectUserModal=false;$.fn.selectUser=function(options){if(!initSelectUserModal){initSelectUserModal=true;$selectUserModal.appendTo($("body"));window.closeSelectUser=function(){$selectUserModal.modal("hide")};$selectUserModal.on("hide.bs.modal",function(){$selectUserModal.find(".select-user-frame").prop("src","about:blank")})}var defaults={selectUser:$.noop};var settings={};if(_.isFunction(options)){settings.selectUser=options}else if(_.isObject(options)){settings=$.extend(defaults,options||{})}return this.each(function(){var $this=$(this);$this.on("click",function(e){window.selectUser=function(user){settings.selectUser(user);$selectUserModal.modal("hide")};$selectUserModal.find(".select-user-frame").prop("src",_selectUserUrl);$selectUserModal.modal()})})};var _selectOrganHtml='<div class="modal" tabindex="-1">';_selectOrganHtml+='<div class="modal-dialog modal-lg modal-dialog-centered">';_selectOrganHtml+='<div class="modal-content">';_selectOrganHtml+='<div class="modal-body p-0" style="background-color:#939ba1;">';_selectOrganHtml+='<iframe id="selectOrganFrame" name="selectOrganFrame" src="" class="select-organ-frame w-100 border-0" height="730"></iframe>';_selectOrganHtml+="</div>";_selectOrganHtml+="</div>";_selectOrganHtml+="</div>";_selectOrganHtml+="</div>";var $selectOrganModal=$(_selectOrganHtml),_selectOrganUrl=_CONF.prefix+"/selectorgan?_nofooter=true",initSelectOrganModal=false;$.fn.selectOrgan=function(options){if(!initSelectOrganModal){initSelectOrganModal=true;$selectOrganModal.appendTo($("body"));window.closeSelectOrgan=function(){$selectOrganModal.modal("hide")};$selectOrganModal.on("hide.bs.modal",function(){$selectOrganModal.find(".select-organ-frame").prop("src","about:blank")})}var defaults={selectOrgan:$.noop};var settings={};if(_.isFunction(options)){settings.selectOrgan=options}else if(_.isObject(options)){settings=$.extend(defaults,options||{})}return this.each(function(){var $this=$(this);$this.on("click",function(e){window.selectOrgan=function(organ){settings.selectOrgan(organ);$selectOrganModal.modal("hide")};$selectOrganModal.find(".select-organ-frame").prop("src",_selectOrganUrl);$selectOrganModal.modal()})})}})(jQuery);