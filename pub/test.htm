<div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" id="globalViewModalTitle">2차인증요청</h5>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
			</div>
			<div class="modal-body" id="globalViewModalBody">
<div class="regCertify d-none">
	<ul class="list-unstyled  list-borderT">
		<li>2차인증 사용을 위해 전용앱 다운로드 후 <span class="text-warning">최초 1회 기기 등록</span>이 필요합니다.</li>
	</ul>
	<form id="" action="" method="post" class="">
		<div class="card modal-card login-card">
			<div class="card-body d-flex flex-wrap certify">
				<div class="col-12 col-lg-6 form-group">
					<div class="col-12 col-form-label text-blue">기관코드</div>
					<div class="col-12">U1034</div>
				</div>
				<div class="col-12 col-lg-6 form-group">
					<div class="col-12 col-form-label text-blue">아이디</div>
					<div class="col-12">chs1217</div>
				</div>
				<div class="col-12 col-lg-6 form-group">
					<div class="col-12 col-form-label text-blue">발급코드</div>
					<div class="col-12 code-group">
					</div>
				</div>
				<div class="col-12 col-lg-6 form-group">
					<div class="col-12 col-form-label text-blue">만료기간</div>
					<!-- 						<div class="col-12 col-lg-9">${_date.db($expireDate)}</div> -->
					<div class="col-12 col-lg-9"></div>

				</div>
			</div>
		</div>
	</form>
	<div class="mt-2">
		<a class="btn btn-sm btn-secondary" href="https://play.google.com/store/apps/details?id=kr.co.ideatec.ionepass&amp;hl=ko&amp;gl=US" title="새창" target="_blank">안드로이드 APP<i class="fa-regular fa-arrow-right ml-1"></i></a>
		<a class="btn btn-sm btn-secondary" href="https://apps.apple.com/kr/app/ionepass%ED%86%B5%ED%95%A9%EC%9D%B8%EC%A6%9D/id1526228740" title="새창" target="_blank">iOS APP<i class="fa-regular fa-arrow-right ml-1"></i></a>
		<a href="#" class="btn btn-sm btn-primary" data-toggle="modal" data-target="#certifyInfo"><i class="fa-regular fa-circle-question mr-2"></i>2차 인증 이용안내</a>
	</div>
	<ul class="list-unstyled mt-2">
		<li class="mt-1">※ 2차인증 : 타인에 의한 계정 도용 방지 등 로그인 보안성 강화를 위해 인증앱을 통한 추가인증을 거쳐야만 로그인할 수 있는 이중보안 서비스</li>
		<li class="mt-1">※ 보안 강화를 위하여 로그인 시 2차인증 단계를 필수로 진행하려면 마이페이지 로그인설정에서 2차인증 설정을 활성화하세요.</li>
	</ul>
	<div class="text-center mt-3"><button class="btn btn-primary btn-certify">닫기</button></div>
</div>

<div class="joinCertify">
	<div class="certify-wrap d-flex justify-content-between mt-3 flex-wrap">
		<div>
			<span class="text-black mr-3"><strong>01</strong></span><a href="#" class="btn btn-primary sendCertify">인증 요청</a>
			<p class="mt-2"><span class="text-primary">[인증요청]</span>버튼을 클릭하면 스마트폰 통합인증앱에 메시지가 전송됩니다.</p>
		</div>
		<div>
			<span class="text-black mr-3"><strong>02</strong></span><a href="#" class="btn btn-primary checkCertify" disabled="true">인증 확인</a>
			<p class="mt-2">스마트폰 통합인증앱에서 인증요청 확인을 완료하였으면 <span class="text-primary">[인증확인]</span>버튼 클릭하세요.</p>
		</div>
	</div>

<!--	<div class="text-center">-->
<!--		<p class="my-5">인증요청 버튼을 누르면 통합인증앱에 메시지가 전송됩니다.</p>-->
<!--		<a href="#" class="btn btn-primary sendCertify">인증 요청</a>-->
<!--		<a href="#" class="btn btn-primary checkCertify" disabled="true">인증 확인</a>-->
<!--	</div>-->
	<div class="help-wrap">
		<div class="help-title"><i class="fa-solid fa-square-info mr-1"></i>도움말</div>
		<ul class="list-unstyled">
			<li>2차 인증 사용을 위해 최초 1회 기기 등록이 필요합니다</li>
			<li>ionepass통합인증앱 설치 후 인증수단을 등록해주세요.
				<div class="d-inline-block">
					<a class="btn btn-sm btn-secondary" href="https://play.google.com/store/apps/details?id=kr.co.ideatec.ionepass&amp;hl=ko&amp;gl=US" title="새창" target="_blank">안드로이드 APP<i class="fa-regular fa-arrow-right ml-1"></i></a>
					<a class="btn btn-sm btn-secondary" href="https://apps.apple.com/kr/app/ionepass%ED%86%B5%ED%95%A9%EC%9D%B8%EC%A6%9D/id1526228740" title="새창" target="_blank">iOS APP<i class="fa-regular fa-arrow-right ml-1"></i></a>
				</div>
			</li>
			<li>통합인증앱 재설치 등으로 인증요청에 문제가 발생할 경우 디지털정보처(064-754-8391)로 연락해주세요.</li>
			<li class="text-danger"><strong>기기변경, 앱 오류 등 발생으로 2차인증이 불가한 경우 <span style="color: #000;  font-size: 16px;">휴대폰본인확인</span>을 통해 2차인증을 재설정합니다.</strong>
			<span class="d-flex justify-content-center w-100"><a href="#" class="btn btn-sm btn-primary mt-1 resetCertify" disabled="true">본인 확인</a></span></li>
		</ul>
	</div>
	<ul class="list-unstyled mt-2">
		<li class="mt-1">※ 2차인증 : 타인에 의한 계정 도용 방지 등 로그인 보안성 강화를 위해 인증앱을 통한 추가인증을 거쳐야만 로그인할 수 있는 이중보안 서비스</li>
		<li class="mt-1">※ 보안 강화를 위하여 로그인 시 2차인증 단계를 필수로 진행하려면 마이페이지 로그인설정에서 2차인증 설정을 활성화하세요.</li>
	</ul>
</div>

<div class="modal fade default-modal" id="certifyInfo" tabindex="-1" aria-labelledby="certifyInfoLabel" aria-hidden="true">
	<div class="modal-dialog modal-lg modal-dialog-centered">
		<div class="modal-content">
			<div class="modal-header">
				<div class="modal-title" id="certifyInfoLabel">2차 인증 이용안내</div>
				<button type="button" class="close" id="certifyInfo-close">
					<i class="fal fa-xmark"><span>닫기</span></i>
				</button>
			</div>
			<div class="modal-body">
				<div class="certify-info">
					<div class="step-title border-0"><span class="text-label mr-1">STEP 01</span> 최초 기기 등록</div>
					<div class="info-list">
						<div class="text">
							<p class="pb-3">1. 아이디 / 비밀번호 입력 후 로그인 버튼을 클릭하면 2차인증 발급코드 화면이 제공됩니다.</p>
							<p>2. 앱스토어 / 구글플레이에서 앱 다운로드 후 앱을 실행합니다.</p>
						</div>
						<div class="img">
							<span class="text-label">2차 인증 발급화면</span>
							<img src="/pub/site/portal/images/common/cd_img_01.jpg" alt="2차 인증 발급화면">
						</div>
					</div>
					<div class="info-list">
						<div class="text">
							<p>3. 기관코드 / 아이디 / 발급코드 입력 후 등록 버튼을 클릭합니다.</p>
						</div>
						<div class="img">
							<span class="text-label">통합인증 화면</span>
							<img src="/pub/site/portal/images/common/cd_img_02.jpg" alt="통합인증 화면">
						</div>
					</div>
					<div class="info-list">
						<div class="text">
							<p>4. 인증서비스 목록에서 제주대학을 선택합니다.</p>
						</div>
						<div class="img">
							<span class="text-label">통합인증 화면</span>
							<img src="/pub/site/portal/images/common/cd_img_03.jpg" alt="인증서비스 목록 화면">
						</div>
					</div>
					<div class="info-list">
						<div class="text">
							<p>5. 2차인증에서 사용할 인증수단을 선택하여 등록합니다.</p>
						</div>
						<div class="img">
							<span class="text-label">인증수단 등록 확면</span>
							<img src="/pub/site/portal/images/common/cd_img_04.jpg" alt="인증수단 등록 확면">
						</div>
					</div>
					<div class="step-title"><span class="text-label mr-1">STEP 02</span> 2차인증 요청하기</div>
					<div class="info-list">
						<div class="text">
							<p class="pb-3">1. 아이디 / 비밀번호 입력 후 로그인 버튼을 클릭하면 2차인증 요청 팝업이 제공됩니다.</p>
							<p>2. [인증 요청] 버튼을 클릭합니다.</p>
						</div>
						<div class="img">
							<span class="text-label">2차인증 팝업 화면</span>
							<img src="/pub/site/portal/images/common/cd_img_05.webp" alt="2차인증 팝업 화면">
						</div>
					</div>
					<div class="info-list">
						<div class="text">
							<p>3. 2차인증 앱에서 인증요청을 확인하고 [인증진행] 버튼을 클릭합니다.</p>
						</div>
						<div class="img">
							<span class="text-label">2차인증 앱 화면</span>
							<img src="/pub/site/portal/images/common/cd_img_06.jpg" alt="2차인증 앱 화면">
						</div>
					</div>
					<div class="info-list">
						<div class="text">
							<p>4. 기 설정한 인증수단으로 인증을 완료합니다.</p>
						</div>
						<div class="img">
							<span class="text-label">2차인증 앱 화면</span>
							<img src="/pub/site/portal/images/common/cd_img_07.jpg" alt="2차인증 앱 화면">
						</div>
					</div>
					<div class="info-list">
						<div class="text">
							<p>5. 2차인증이 완료되고 포털 메인화면으로 이동합니다.</p>
						</div>
						<div class="img">
							<span class="text-label">2차인증 앱 화면</span>
							<img src="/pub/site/portal/images/common/cd_img_08.webp" alt="2차인증 앱 화면">
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

<form id="reqPCCForm" name="reqPCCForm" method="post">
	<input type="hidden" name="reqInfo" value="0F466DD7534065CE6D77B4D4DA37532F7D7935A24CA769D2687888159B6B65CFE75469ED23EB0BD6F6FDA0EF95CE9E21F1F794092853B553D1BF627D09F275A7AC19E4FCE64F3A1F1EC355E8A8ACAF2010438AD49BC0437D124B6E14F36C242C6909E3C6BBC87726CB72CE48463FA3FA34B7F70642511FA97A849F1E6D429AD34BB00D0E1A491F856165EE182BAE47271ED12D07702303A5EE8E9D9239E0D2252BCFEB87F1585DBA731712F4CFC96A92B76E8DDF0DE60ECFB12C8A58F4027A48D6391619E9E4B990D66A57C2BF79C303DA40D3E663A42F773777FC878D1C8C1B908CD66A1452815AC38CEC61E38F0BCCB2755C92201E1340031ADD6198E2F41079E240824150AFF0089443E682DEE6D73ECA65AD9B5888779665EFDEF2DE560055A0368C63F32825F4AB60F5E43464FFBA191D6BDD1B794D9534F70582BA53F03BDEA5B769B42CB0CCB3C05DE0BB127C437F1A37954540CF45FB0A3EC178AD5BCED6FF1568FDC9136FEED53E074A2CDFA3F00819A076CA145750E19C68D4FA63122A8261BC2DB2310D1CB09FD2D712917EBACAADEA56CA96428851750E9A0EE8476E6F7D87AF612FE344F4D1286C94FE1F623BF724DFFEE06C510D3FE8EDFF4BFD67A0194F69E4E9F3FFF71E3319411625AFB7131F4C92B0DCE6ADD71087E290">
	<input type="hidden" name="retUrl" value="32https://portal.jejunu.ac.kr/login.htm?act=selfcheck&amp;removeUrl=true">
	<input type="hidden" name="verSion" value="2">
</form>

	<script>
		$(function() {
			let rtnCode = "CHECK";
			let rtnTid = "";
			if ( rtnCode == "CHECK")
			{
				$(".joinCertify").removeClass("d-none");
				$("#globalViewModalTitle").html("2차인증요청");
			}
			else
			{
				$("#globalViewModalTitle").html("2차인증 발급코드");
				$(".regCertify").removeClass("d-none");
				let cerCode = "";
				console.log("");
				codeValue = "";
				for ( var i = 0 ; i < 5 ; i++)
				{
					codeValue += "<span>"+cerCode.substring(i, i+1)+"</span>";
				}

				$(".code-group").html(codeValue);

			}

			$(".btn-certify").click(function () {

				$("#globalViewModalTitle").html("2차인증요청");

				$.ajax({
					url: '/login.htm',
					dataType: 'json',
					data: {
						act: 'checkUserStatus',
						_out : 'json'
					},
					success: function(rtn) {
						if ( rtn.returnMap.returnCode == '0000')
						{
							$(".regCertify").addClass("d-none");
							$(".joinCertify").removeClass("d-none");
						}
						else
						{
							alert(rtn.returnMap.returnMessage );
						}
					}
				});


			});

			$('.sendCertify').click(function () {

				$.ajax({
					url: '/login.htm',
					dataType: 'json',
					data: {
						act: 'callCertify',
						_out : 'json'
					},
					success: function(rtn) {
						rtnTid = rtn.tid;
						alert("인증요청되었습니다.\n휴대폰에서 인증을 완료해주시고 인증확인버튼을 눌러주세요!");
					}
				});
			});

			$('.checkCertify').click(function () {

				$.ajax({
					url: '/login.htm',
					dataType: 'json',
					data: {
						act: 'callCertifyCheck',
						tid: rtnTid,
						_out : 'json'
					},
					success: function(rtn) {
						if ( rtn.returnMap.returnCode == '0000')
						{
							location.href = "index.htm";
						}
						else if ( rtn.returnMap.returnCode == '1013')
						{
							alert("사용자 인증이 완료되지 않았습니다.");
						}
						else if ( rtn.returnMap.returnCode == '1014')
						{
							if ( confirm("인증유효시간이 초과되었습니다.\n 재요청하시겠습니까?") )
							{
								$('.sendCertify').click();
							}
						}
						else
						{
							alert(rtn.returnMap.returnMessage );
						}
					}
				});
			});


			$('.resetCertify').click(function () {
				var PCC_window = window.open('', 'PCCV3Window', 'width=400, height=630, resizable=1, scrollbars=no, status=0, titlebar=0, toolbar=0, left=300, top=200' );
				if(PCC_window == null){ alert(" ※ 윈도우 XP SP2 또는 인터넷 익스플로러 7 사용자일 경우에는 \n    화면 상단에 있는 팝업 차단 알림줄을 클릭하여 팝업을 허용해 주시기 바랍니다. \n\n※ MSN,야후,구글 팝업 차단 툴바가 설치된 경우 팝업허용을 해주시기 바랍니다."); }
				document.reqPCCForm.action = 'https://pcc.siren24.com/pcc_V3/jsp/pcc_V3_j10_v2.jsp';
				document.reqPCCForm.target = 'PCCV3Window';
				$('#reqPCCForm').submit();
			});
		});
	</script>

	<script>
		$(function() {
			$("#certifyInfo-close").click(function(){
				$("#certifyInfo").hide();
				$(".modal-backdrop").hide();
			});
		});

		function fn_resetCertify()
		{

			$.ajax({
				url: '/login.htm',
				dataType: 'json',
				data: {
					act: 'resetCertify',
					_out : 'json'
				},
				success: function(rtn) {

					if ( rtn.rtnCode == "OK")
					{
						if (  rtn.returnMap.returnCode == "0000")
						{
							if ( confirm("초기화 완료 되었습니다.") )
							{
								location.reload();
							}
						}
						else
						{
							alert(rtn.returnMap.returnMessage);
						}
					}
					else
					{
						alert(rtn.rtnMsg);
					}
				}
			});

		}
	</script>


</div>
			
		</div>
	</div>